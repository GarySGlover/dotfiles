{
  config,
  lib,
  ...
}:
with lib;
let
  removeHashPrefix =
    str:
    if builtins.substring 0 1 str == "#" then
      builtins.substring 1 (builtins.stringLength str - 1) str
    else
      str;
in
{
  config.wolf.theme = mkIf (config.wolf.theme.name == "ef-melissa-light") {
    type = "light";
    font = {
      name = "0xProto Nerd Font";
      size = 10;
    };

    border = 2;
    gaps = 2;

    faces =
      with config.wolf.theme;
      builtins.mapAttrs (name: value: removeHashPrefix value) {
        fgOrgAgendaCalendarSexp = "#80431A";
        bgOrgAgendaCalendarSexp = "#000000";
        fgOrgAgendaDate = "#5A7400";
        bgOrgAgendaDate = "#000000";
        fgAnsiColorWhite = "#A6A6A6";
        bgAnsiColorWhite = "#A6A6A6";
        fgFontLockPropertyUseFace = "#0F708A";
        bgFontLockPropertyUseFace = "#000000";
        fgOrgAgendaDateWeekend = "#B05350";
        bgOrgAgendaDateWeekend = "#000000";
        fgFontLockRegexpFace = "#C74400";
        bgFontLockRegexpFace = "#000000";
        fgLinkVisited = "#6448CA";
        bgLinkVisited = "#000000";
        fgOrgAgendaDimmedTodoFace = "#68708A";
        bgOrgAgendaDimmedTodoFace = "#000000";
        fgHelpArgumentName = "#BA5205";
        bgHelpArgumentName = "#000000";
        fgOrgInlineSrcBlock = "#000000";
        bgOrgInlineSrcBlock = "#F9EFD4";
        fgFontLockNumberFace = "#000000";
        bgFontLockNumberFace = "#000000";
        fgOrgScheduledPreviously = "#A26310";
        bgOrgScheduledPreviously = "#000000";
        fgChildFrameBorder = "#000000";
        bgChildFrameBorder = "#C5BAA6";
        fgAnsiColorBold = "#000000";
        bgAnsiColorBold = "#000000";
        fgFontLockRegexpGroupingConstruct = "#6448CA";
        bgFontLockRegexpGroupingConstruct = "#000000";
        fgFontLockTypeFace = "#008250";
        bgFontLockTypeFace = "#000000";
        fgHomoglyph = "#A52A2A";
        bgHomoglyph = "#000000";
        fgFontLockPreprocessorFace = "#BA5205";
        bgFontLockPreprocessorFace = "#000000";
        fgVariablePitch = "#000000";
        bgVariablePitch = "#000000";
        fgOrgCite = "#A26310";
        bgOrgCite = "#000000";
        fgModeLineEmphasis = "#1F409F";
        bgModeLineEmphasis = "#000000";
        fgVariablePitchText = "#000000";
        bgVariablePitchText = "#000000";
        fgAnsiColorFastBlink = "#000000";
        bgAnsiColorFastBlink = "#000000";
        fgTtyMenuSelectedFace = "#000000";
        bgTtyMenuSelectedFace = "#DEB4F0";
        fgOrgListDt = "#000000";
        bgOrgListDt = "#000000";
        fgFontLockRegexpGroupingBackslash = "#007A0A";
        bgFontLockRegexpGroupingBackslash = "#000000";
        fgOrgLevel1 = "#A26310";
        bgOrgLevel1 = "#000000";
        fgReadMultipleChoiceFace = "#BA5205";
        bgReadMultipleChoiceFace = "#FFE89F";
        fgEscapeGlyph = "#BA5205";
        bgEscapeGlyph = "#000000";
        fgMinibufferPrompt = "#5A7400";
        bgMinibufferPrompt = "#000000";
        fgAnsiColorBrightBlue = "#5F5FDF";
        bgAnsiColorBrightBlue = "#5F5FDF";
        fgOrgHeadlineTodo = "#C74400";
        bgOrgHeadlineTodo = "#000000";
        fgBoldItalic = "#000000";
        bgBoldItalic = "#000000";
        fgOrgVerse = "#000000";
        bgOrgVerse = "#F9EFD4";
        fgOrgAgendaDateWeekendToday = "#B05350";
        bgOrgAgendaDateWeekendToday = "#000000";
        fgOrgBlockEndLine = "#68708A";
        bgOrgBlockEndLine = "#F5E9CB";
        fgFontLockMiscPunctuationFace = "#000000";
        bgFontLockMiscPunctuationFace = "#000000";
        fgOrderlessMatchFace0 = "#BA5205";
        bgOrderlessMatchFace0 = "#000000";
        fgGlyphlessChar = "#000000";
        bgGlyphlessChar = "#000000";
        fgFontLockWarningFace = "#BA5205";
        bgFontLockWarningFace = "#000000";
        fgFontLockNegationCharFace = "#000000";
        bgFontLockNegationCharFace = "#000000";
        fgVerticalBorder = "#C5BAA6";
        bgVerticalBorder = "#000000";
        fgFixedPitch = "#000000";
        bgFixedPitch = "#000000";
        fgTabBarTabGroupCurrent = "#80431A";
        bgTabBarTabGroupCurrent = "#FFF6D8";
        fgAnsiColorBlue = "#375CC6";
        bgAnsiColorBlue = "#375CC6";
        fgOrgScheduled = "#7F6F1A";
        bgOrgScheduled = "#000000";
        fgOrgAgendaFilterTags = "#900000";
        bgOrgAgendaFilterTags = "#000000";
        fgOrgHide = "#FFF6D8";
        bgOrgHide = "#000000";
        fgOrgCode = "#BA5205";
        bgOrgCode = "#000000";
        fgOrgWarning = "#BA5205";
        bgOrgWarning = "#000000";
        fgFontLockCommentFace = "#C74400";
        bgFontLockCommentFace = "#000000";
        fgModeLineInactive = "#68708A";
        bgModeLineInactive = "#E7D7C6";
        fgOrgDocumentInfo = "#80431A";
        bgOrgDocumentInfo = "#000000";
        fgOrgImminentDeadline = "#BA2D2F";
        bgOrgImminentDeadline = "#000000";
        fgOrgTableRow = "#80431A";
        bgOrgTableRow = "#000000";
        fgOrgLevel5 = "#AA3E74";
        bgOrgLevel5 = "#000000";
        fgLineNumberMinorTick = "#68708A";
        bgLineNumberMinorTick = "#FFF6D8";
        fgAnsiColorBrightBlack = "#595959";
        bgAnsiColorBrightBlack = "#595959";
        fgOrgAgendaColumnDateline = "#000000";
        bgOrgAgendaColumnDateline = "#E7D7C6";
        fgFontLockBuiltinFace = "#946830";
        bgFontLockBuiltinFace = "#000000";
        fgAnsiColorBrightMagenta = "#6448CA";
        bgAnsiColorBrightMagenta = "#6448CA";
        fgAnsiColorSlowBlink = "#000000";
        bgAnsiColorSlowBlink = "#000000";
        fgAnsiColorRed = "#BA2D2F";
        bgAnsiColorRed = "#BA2D2F";
        fgOrgAgendaCurrentTime = "#484431";
        bgOrgAgendaCurrentTime = "#000000";
        fgOrgAgendaStructure = "#80431A";
        bgOrgAgendaStructure = "#000000";
        fgDefault = "#484431";
        bgDefault = "#FFF6D8";
        fgShowParenMatchExpression = "#000000";
        bgShowParenMatchExpression = "#E7D7C6";
        fgOrgLevel4 = "#4060A0";
        bgOrgLevel4 = "#000000";
        fgFontLockFunctionNameFace = "#5A7400";
        bgFontLockFunctionNameFace = "#000000";
        fgWarning = "#BA5205";
        bgWarning = "#000000";
        fgShowParenMatch = "#000000";
        bgShowParenMatch = "#AFCF8F";
        fgOrgUpcomingDeadline = "#B05350";
        bgOrgUpcomingDeadline = "#000000";
        fgOrgAgendaRestrictionLock = "#68708A";
        bgOrgAgendaRestrictionLock = "#F5E9CB";
        fgOrgTableHeader = "#80431A";
        bgOrgTableHeader = "#000000";
        fgOrderlessMatchFace3 = "#6448CA";
        bgOrderlessMatchFace3 = "#000000";
        fgWindowDivider = "#C5BAA6";
        bgWindowDivider = "#000000";
        fgFontLockConstantFace = "#3F60AF";
        bgFontLockConstantFace = "#000000";
        fgError = "#C74400";
        bgError = "#000000";
        fgTrailingWhitespace = "#000000";
        bgTrailingWhitespace = "#FF8F88";
        fgOrgFormula = "#BA5205";
        bgOrgFormula = "#000000";
        fgOrgArchived = "#484431";
        bgOrgArchived = "#E7D7C6";
        fgAnsiColorFaint = "#000000";
        bgAnsiColorFaint = "#000000";
        fgOrgTable = "#80431A";
        bgOrgTable = "#000000";
        fgFontLockDelimiterFace = "#000000";
        bgFontLockDelimiterFace = "#000000";
        fgOrgColumn = "#484431";
        bgOrgColumn = "#E7D7C6";
        fgOrgLevel8 = "#0F708A";
        bgOrgLevel8 = "#000000";
        fgWindowDividerLastPixel = "#F9EFD4";
        bgWindowDividerLastPixel = "#000000";
        fgFontLockEscapeFace = "#007A0A";
        bgFontLockEscapeFace = "#000000";
        fgHeaderLineHighlight = "#000000";
        bgHeaderLineHighlight = "#DEB4F0";
        fgOrgTag = "#7F6F1A";
        bgOrgTag = "#000000";
        fgOrgClockOverlay = "#000000";
        bgOrgClockOverlay = "#C4D47A";
        fgFontLockFunctionCallFace = "#5A7400";
        bgFontLockFunctionCallFace = "#000000";
        fgOrgAgendaClocking = "#BA5205";
        bgOrgAgendaClocking = "#FFE89F";
        fgFontLockOperatorFace = "#000000";
        bgFontLockOperatorFace = "#000000";
        fgWindowDividerFirstPixel = "#F9EFD4";
        bgWindowDividerFirstPixel = "#000000";
        fgLineNumberMajorTick = "#BA5205";
        bgLineNumberMajorTick = "#FFF6D8";
        fgOrgMetaLine = "#68708A";
        bgOrgMetaLine = "#000000";
        fgOrgAgendaStructureSecondary = "#B05350";
        bgOrgAgendaStructureSecondary = "#000000";
        fgFontLockVariableNameFace = "#0F708A";
        bgFontLockVariableNameFace = "#000000";
        fgTabBarTabGroupInactive = "#80431A";
        bgTabBarTabGroupInactive = "#E7D7C6";
        fgOrgDone = "#007A0A";
        bgOrgDone = "#000000";
        fgShadow = "#68708A";
        bgShadow = "#000000";
        fgModeLineBufferId = "#000000";
        bgModeLineBufferId = "#000000";
        fgOrgAgendaFilterRegexp = "#900000";
        bgOrgAgendaFilterRegexp = "#000000";
        fgAnsiColorBrightCyan = "#0F708A";
        bgAnsiColorBrightCyan = "#0F708A";
        fgOrgAgendaStructureFilter = "#BA5205";
        bgOrgAgendaStructureFilter = "#000000";
        fgRegion = "#000000";
        bgRegion = "#F0D4D8";
        fgFillColumnIndicator = "#E7D7C6";
        bgFillColumnIndicator = "#E7D7C6";
        fgInternalBorder = "#000000";
        bgInternalBorder = "#000000";
        fgOrgDocumentInfoKeyword = "#68708A";
        bgOrgDocumentInfoKeyword = "#000000";
        fgOrgSpecialKeyword = "#68708A";
        bgOrgSpecialKeyword = "#000000";
        fgOrgCheckboxStatisticsTodo = "#C74400";
        bgOrgCheckboxStatisticsTodo = "#000000";
        fgOrgLink = "#A26310";
        bgOrgLink = "#000000";
        fgUnderline = "#000000";
        bgUnderline = "#000000";
        fgOrgLevel3 = "#C02945";
        bgOrgLevel3 = "#000000";
        fgAnsiColorBrightWhite = "#FFFFFF";
        bgAnsiColorBrightWhite = "#FFFFFF";
        fgOrgAgendaCalendarEvent = "#80431A";
        bgOrgAgendaCalendarEvent = "#000000";
        fgLineNumber = "#68708A";
        bgLineNumber = "#FFF6D8";
        fgOrgAgendaDone = "#007A0A";
        bgOrgAgendaDone = "#000000";
        fgOrgVerbatim = "#BA2D2F";
        bgOrgVerbatim = "#000000";
        fgOrgDispatcherHighlight = "#BA5205";
        bgOrgDispatcherHighlight = "#FFE89F";
        fgTabBarTab = "#000000";
        bgTabBarTab = "#FFF6D8";
        fgNobreakSpace = "#BA5205";
        bgNobreakSpace = "#000000";
        fgOrgHeadlineDone = "#007A0A";
        bgOrgHeadlineDone = "#000000";
        fgFontLockBracketFace = "#000000";
        bgFontLockBracketFace = "#000000";
        fgTtyMenuEnabledFace = "#000000";
        bgTtyMenuEnabledFace = "#E7D7C6";
        fgOrgDocumentTitle = "#BA5205";
        bgOrgDocumentTitle = "#000000";
        fgCursor = "#000000";
        bgCursor = "#A07F00";
        fgFontLockStringFace = "#C74400";
        bgFontLockStringFace = "#000000";
        fgOrderlessMatchFace2 = "#BA2D2F";
        bgOrderlessMatchFace2 = "#000000";
        fgSecondarySelection = "#000000";
        bgSecondarySelection = "#C4D47A";
        fgMenu = "#484431";
        bgMenu = "#F5E9CB";
        fgHighlight = "#000000";
        bgHighlight = "#DEB4F0";
        fgTtyMenuDisabledFace = "#68708A";
        bgTtyMenuDisabledFace = "#E7D7C6";
        fgHelpKeyBinding = "#BA5205";
        bgHelpKeyBinding = "#000000";
        fgNobreakHyphen = "#A52A2A";
        bgNobreakHyphen = "#000000";
        fgOrgAgendaCalendarDaterange = "#80431A";
        bgOrgAgendaCalendarDaterange = "#000000";
        fgFontLockCommentDelimiterFace = "#C74400";
        bgFontLockCommentDelimiterFace = "#000000";
        fgTabBarTabUngrouped = "#000000";
        bgTabBarTabUngrouped = "#C7B7A6";
        fgBorder = "#000000";
        bgBorder = "#000000";
        fgLink = "#A26310";
        bgLink = "#000000";
        fgOrgScheduledToday = "#A26310";
        bgOrgScheduledToday = "#000000";
        fgTabBarTabInactive = "#000000";
        bgTabBarTabInactive = "#C7B7A6";
        fgOrgLevel7 = "#B02F80";
        bgOrgLevel7 = "#000000";
        fgOrgAgendaDiary = "#80431A";
        bgOrgAgendaDiary = "#000000";
        fgSuccess = "#007A0A";
        bgSuccess = "#000000";
        fgOrgAgendaFilterCategory = "#900000";
        bgOrgAgendaFilterCategory = "#000000";
        fgAnsiColorYellow = "#A26310";
        bgAnsiColorYellow = "#A26310";
        fgFixedPitchSerif = "#000000";
        bgFixedPitchSerif = "#000000";
        fgAnsiColorBlack = "#000000";
        bgAnsiColorBlack = "#000000";
        fgFontLockPunctuationFace = "#000000";
        bgFontLockPunctuationFace = "#000000";
        fgOrgDefault = "#484431";
        bgOrgDefault = "#FFF6D8";
        fgOrgColumnTitle = "#484431";
        bgOrgColumnTitle = "#E7D7C6";
        fgHeaderLine = "#000000";
        bgHeaderLine = "#F5E9CB";
        fgAnsiColorMagenta = "#AA3E74";
        bgAnsiColorMagenta = "#AA3E74";
        fgBold = "#000000";
        bgBold = "#000000";
        fgOrgModeLineClockOverrun = "#900000";
        bgOrgModeLineClockOverrun = "#000000";
        fgOrgDrawer = "#68708A";
        bgOrgDrawer = "#000000";
        fgOrgSexpDate = "#5A7400";
        bgOrgSexpDate = "#000000";
        fgOrgUpcomingDistantDeadline = "#484431";
        bgOrgUpcomingDistantDeadline = "#000000";
        fgFontLockPropertyNameFace = "#0F708A";
        bgFontLockPropertyNameFace = "#000000";
        fgAnsiColorBrightYellow = "#BA5205";
        bgAnsiColorBrightYellow = "#BA5205";
        fgModeLineActive = "#403328";
        bgModeLineActive = "#F3CF72";
        fgOrgCiteKey = "#A26310";
        bgOrgCiteKey = "#000000";
        fgItalic = "#000000";
        bgItalic = "#000000";
        fgAnsiColorCyan = "#3F60AF";
        bgAnsiColorCyan = "#3F60AF";
        fgOrgAgendaFilterEffort = "#900000";
        bgOrgAgendaFilterEffort = "#000000";
        fgOrgQuote = "#000000";
        bgOrgQuote = "#F9EFD4";
        fgOrgLatexAndRelated = "#008250";
        bgOrgLatexAndRelated = "#000000";
        fgModeLineHighlight = "#000000";
        bgModeLineHighlight = "#DEB4F0";
        fgAnsiColorUnderline = "#000000";
        bgAnsiColorUnderline = "#000000";
        fgOrgPropertyValue = "#80431A";
        bgOrgPropertyValue = "#000000";
        fgModeLine = "#403328";
        bgModeLine = "#F3CF72";
        fgOrgLevel2 = "#5A7400";
        bgOrgLevel2 = "#000000";
        fgOrgTagGroup = "#7F6F1A";
        bgOrgTagGroup = "#000000";
        fgAnsiColorItalic = "#000000";
        bgAnsiColorItalic = "#000000";
        fgOrgDateSelected = "#5A7400";
        bgOrgDateSelected = "#000000";
        fgLineNumberCurrentLine = "#000000";
        bgLineNumberCurrentLine = "#FFF6D8";
        fgFontLockKeywordFace = "#A26310";
        bgFontLockKeywordFace = "#000000";
        fgFontLockDocMarkupFace = "#3F60AF";
        bgFontLockDocMarkupFace = "#000000";
        fgFontLockVariableUseFace = "#0F708A";
        bgFontLockVariableUseFace = "#000000";
        fgOrgCheckbox = "#BA5205";
        bgOrgCheckbox = "#000000";
        fgShowParenMismatch = "#000000";
        bgShowParenMismatch = "#FF8F88";
        fgOrgCheckboxStatisticsDone = "#007A0A";
        bgOrgCheckboxStatisticsDone = "#000000";
        fgTabBar = "#000000";
        bgTabBar = "#E7D7C6";
        fgFontLockDocFace = "#B05350";
        bgFontLockDocFace = "#000000";
        fgOrgBlockBeginLine = "#68708A";
        bgOrgBlockBeginLine = "#F5E9CB";
        fgTabLine = "#000000";
        bgTabLine = "#E7D7C6";
        fgOrgModeLineClock = "#000000";
        bgOrgModeLineClock = "#000000";
        fgOrderlessMatchFace1 = "#008250";
        bgOrderlessMatchFace1 = "#000000";
        fgOrgAgendaDateToday = "#5A7400";
        bgOrgAgendaDateToday = "#000000";
        fgAnsiColorBrightRed = "#C74400";
        bgAnsiColorBrightRed = "#C74400";
        fgOrgTarget = "#000000";
        bgOrgTarget = "#000000";
        fgAnsiColorGreen = "#007A0A";
        bgAnsiColorGreen = "#007A0A";
        fgOrgTimeGrid = "#68708A";
        bgOrgTimeGrid = "#000000";
        fgAnsiColorBrightGreen = "#5A7400";
        bgAnsiColorBrightGreen = "#5A7400";
        fgOrgLevel6 = "#008250";
        bgOrgLevel6 = "#000000";
        fgAnsiColorInverse = "#000000";
        bgAnsiColorInverse = "#000000";
      }
      // {
        fgBorderInactive = faces.fgVerticalBorder;
        bgBorderInactive = faces.bgVerticalBorder;
        fgUnset = "#ff1493";
        bgUnset = "#ff1493";
      };

    dracula = with config.wolf.theme.faces; {
      background = bgDefault;
      foreground = fgDefault;
      currentLine = bgHighlight;
      comment = fgFontLockCommentFace;
      cyan = fgAnsiColorCyan;
      green = fgAnsiColorGreen;
      orange = fgWarning;
      pink = fgAnsiColorMagenta;
      purple = fgAnsiColorBlue;
      red = fgAnsiColorRed;
      yellow = fgAnsiColorYellow;
    };
  };
}
